window.onload = () => {
    let phoneInput = IMask(
        document.getElementById('customInputPhone'),
        {
            mask: '+{38}(000)000-00-00',
            lazy: false,
            placeholderChar: '_'
        }
    )

    let moduleBox = document.querySelector('.custom-module-box');

    document.addEventListener('click', function (e) {
        if (e.path[0].id === "CustomModuleBox") {
            moduleBox.classList.remove('custom-show');
            moduleBox.classList.add('custom-hide');
        }
    })
    document.querySelector('.custom-module-close').addEventListener('click', function (e) {
        moduleBox.classList.add('custom-hide');
    });

    document.querySelector('.order_call').addEventListener('click', function (e) {
        moduleBox.classList.remove('custom-hide');
    })

    document.querySelector('.custom-module-btn').addEventListener('click', function (e) {
        e.preventDefault();
        let form = document.getElementById('vitamins_contact_form');
        const formData = new FormData(form);
        let jsonObject = {};
        let errors = [];
        for (const [key, value] of formData.entries()) {

            jsonObject[key] = value;
            if (key === 'vitaminsUserName' && value === "") {
                form.elements[key].classList.add('custom_form_alert');
                errors.push('Введите свое имя');
            } else if (key === 'vitaminsUserPhone' && value.match(/\d+/g).map(function (item) { return item; }).join('').length !== 12) {
                form.elements[key].classList.add('custom_form_alert');
                errors.push('Введите номер телефона');
            }
            else {
                form.elements[key].classList.remove('custom_form_alert');
            }
        }
        if (errors.length === 0) {
            try {
                let data = {
                    nonce: sendEmailAjax.key,
                    action: 'vitaminssendemail',
                    name: jsonObject.vitaminsUserName,
                    phone: jsonObject.vitaminsUserPhone,
                };

                jQuery.post({
                    type: 'POST',
                    url: sendEmailAjax.url,
                    data: data,
                    beforeSend: () => {
                        document.querySelector('.custom-form-spinner').classList.remove('custom-hide');
                    },
                    success: () => {
                        console.log()
                        document.querySelector('.custom_form_message').classList.remove('custom-hide');
                        document.querySelector('.custom-form-spinner').classList.add('custom-hide');
                    },
                    error: () => {
                        console.log(123);
                    }
                });

            } catch (err) {
                console.log(err.message);
            }
        }
    });

    // ==================== PRODUCT LIST START =========================================
    document.querySelector('.pc-header-layout-3__products').addEventListener('click', function (e) {

        let wrapper = document.querySelector('.products-list-wrapper');
        if (wrapper.classList.contains('custom-hide')) {
            wrapper.classList.remove('custom-hide');
            wrapper.classList.add('custom-flex')
        } else {
            wrapper.classList.remove('custom-flex');
            wrapper.classList.add('custom-hide')
        }
    });

    document.querySelector('.products-list-wrapper__head-close').addEventListener('click', function () {
        let wrapper = document.querySelector('.products-list-wrapper');
        if (wrapper.classList.contains('custom-hide')) {
            wrapper.classList.remove('custom-hide');
            wrapper.classList.add('custom-flex')
        } else {
            wrapper.classList.remove('custom-flex');
            wrapper.classList.add('custom-hide')
        }
    })

    document.addEventListener('click', function(e){
        // e.preventDefault();
        console.log(e.target.parentNode);
        if(e.target.classList.contains('products-list__item-link')) {
            document.querySelector('.products-list-wrapper__head-operation-home').classList.add('custom-hide');
            document.querySelector('.products-list-wrapper__head-operation-home').classList.remove('custom-flex');

            let node = e.target.parentNode.children;
            if(node.length > 1 ){
                e.preventDefault();
                // console.log(node);
                let nodeLinkText = node.item(0).innerText;
                document.querySelector('.products-list-wrapper__head-operation-arrow').classList.remove('custom-hide');
                document.querySelector('.products-list-wrapper__body-container').classList.remove('custom-flex');
                document.querySelector('.products-list-wrapper__body-container').classList.add('custom-hide');
                let moduleBox = document.createElement("div");
                moduleBox.classList.add('product-list_modulemox');
                document.querySelector('.products-list-wrapper__body').appendChild(moduleBox);
                let listToAppend = e.target.parentNode.children.item(1).cloneNode(true);
                moduleBox.appendChild(listToAppend); 
                document.querySelector('.products-list-wrapper__head-title').innerText = nodeLinkText;
                window.scrollTo(0, 0);
            } 
        }
    })
    document.querySelector('.products-list-wrapper__head-operation-arrow').addEventListener('click', function(){
        this.classList.add('custom-hide');
        document.querySelector('.products-list-wrapper__head-operation-home').classList.add('custom-flex')
        let moduleBox = document.querySelector('.product-list_modulemox');
        let body = document.querySelector('.products-list-wrapper__body');
        body.removeChild(moduleBox);
        document.querySelector('.products-list-wrapper__body-container').classList.add('custom-flex');
        document.querySelector('.products-list-wrapper__head-title').innerText = 'Каталог продуктов';
    })
    // ==================== END PRODUCT LIST ============================================

}
jQuery(function ($) {

    $(document).on('click', '[data-package-add-to-cart]', function(e){
        e.preventDefault();

        $.ajax({
            type: 'post',
            url: $(this).attr('href'),
            success: function(){
                $(document.body).trigger('wc_fragment_refresh');
                $('[data-cart-modal]').trigger('click');
            }
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3ZpdGFtaW5zLmpzIiwicHJvZHVjdC9wcm9kdWN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDMUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJzY3JpcHRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICBsZXQgcGhvbmVJbnB1dCA9IElNYXNrKFxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b21JbnB1dFBob25lJyksXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtYXNrOiAnK3szOH0oMDAwKTAwMC0wMC0wMCcsXHJcbiAgICAgICAgICAgIGxhenk6IGZhbHNlLFxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlckNoYXI6ICdfJ1xyXG4gICAgICAgIH1cclxuICAgIClcclxuXHJcbiAgICBsZXQgbW9kdWxlQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1c3RvbS1tb2R1bGUtYm94Jyk7XHJcblxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGlmIChlLnBhdGhbMF0uaWQgPT09IFwiQ3VzdG9tTW9kdWxlQm94XCIpIHtcclxuICAgICAgICAgICAgbW9kdWxlQm94LmNsYXNzTGlzdC5yZW1vdmUoJ2N1c3RvbS1zaG93Jyk7XHJcbiAgICAgICAgICAgIG1vZHVsZUJveC5jbGFzc0xpc3QuYWRkKCdjdXN0b20taGlkZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3VzdG9tLW1vZHVsZS1jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBtb2R1bGVCb3guY2xhc3NMaXN0LmFkZCgnY3VzdG9tLWhpZGUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcmRlcl9jYWxsJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIG1vZHVsZUJveC5jbGFzc0xpc3QucmVtb3ZlKCdjdXN0b20taGlkZScpO1xyXG4gICAgfSlcclxuXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3VzdG9tLW1vZHVsZS1idG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGxldCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpdGFtaW5zX2NvbnRhY3RfZm9ybScpO1xyXG4gICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pO1xyXG4gICAgICAgIGxldCBqc29uT2JqZWN0ID0ge307XHJcbiAgICAgICAgbGV0IGVycm9ycyA9IFtdO1xyXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGZvcm1EYXRhLmVudHJpZXMoKSkge1xyXG5cclxuICAgICAgICAgICAganNvbk9iamVjdFtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICd2aXRhbWluc1VzZXJOYW1lJyAmJiB2YWx1ZSA9PT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgZm9ybS5lbGVtZW50c1trZXldLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbV9mb3JtX2FsZXJ0Jyk7XHJcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgn0JLQstC10LTQuNGC0LUg0YHQstC+0LUg0LjQvNGPJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAndml0YW1pbnNVc2VyUGhvbmUnICYmIHZhbHVlLm1hdGNoKC9cXGQrL2cpLm1hcChmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gaXRlbTsgfSkuam9pbignJykubGVuZ3RoICE9PSAxMikge1xyXG4gICAgICAgICAgICAgICAgZm9ybS5lbGVtZW50c1trZXldLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbV9mb3JtX2FsZXJ0Jyk7XHJcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgn0JLQstC10LTQuNGC0LUg0L3QvtC80LXRgCDRgtC10LvQtdGE0L7QvdCwJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtLmVsZW1lbnRzW2tleV0uY2xhc3NMaXN0LnJlbW92ZSgnY3VzdG9tX2Zvcm1fYWxlcnQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZXJyb3JzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IHNlbmRFbWFpbEFqYXgua2V5LFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3ZpdGFtaW5zc2VuZGVtYWlsJyxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBqc29uT2JqZWN0LnZpdGFtaW5zVXNlck5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmU6IGpzb25PYmplY3Qudml0YW1pbnNVc2VyUGhvbmUsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGpRdWVyeS5wb3N0KHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBzZW5kRW1haWxBamF4LnVybCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZVNlbmQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1c3RvbS1mb3JtLXNwaW5uZXInKS5jbGFzc0xpc3QucmVtb3ZlKCdjdXN0b20taGlkZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdXN0b21fZm9ybV9tZXNzYWdlJykuY2xhc3NMaXN0LnJlbW92ZSgnY3VzdG9tLWhpZGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1c3RvbS1mb3JtLXNwaW5uZXInKS5jbGFzc0xpc3QuYWRkKCdjdXN0b20taGlkZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coMTIzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT0gUFJPRFVDVCBMSVNUIFNUQVJUID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGMtaGVhZGVyLWxheW91dC0zX19wcm9kdWN0cycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuXHJcbiAgICAgICAgbGV0IHdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdHMtbGlzdC13cmFwcGVyJyk7XHJcbiAgICAgICAgaWYgKHdyYXBwZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdjdXN0b20taGlkZScpKSB7XHJcbiAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZSgnY3VzdG9tLWhpZGUnKTtcclxuICAgICAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdjdXN0b20tZmxleCcpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCdjdXN0b20tZmxleCcpO1xyXG4gICAgICAgICAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1oaWRlJylcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdHMtbGlzdC13cmFwcGVyX19oZWFkLWNsb3NlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IHdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdHMtbGlzdC13cmFwcGVyJyk7XHJcbiAgICAgICAgaWYgKHdyYXBwZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdjdXN0b20taGlkZScpKSB7XHJcbiAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZSgnY3VzdG9tLWhpZGUnKTtcclxuICAgICAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdjdXN0b20tZmxleCcpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCdjdXN0b20tZmxleCcpO1xyXG4gICAgICAgICAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1oaWRlJylcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgLy8gZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0LnBhcmVudE5vZGUpO1xyXG4gICAgICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHJvZHVjdHMtbGlzdF9faXRlbS1saW5rJykpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3RzLWxpc3Qtd3JhcHBlcl9faGVhZC1vcGVyYXRpb24taG9tZScpLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1oaWRlJyk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0cy1saXN0LXdyYXBwZXJfX2hlYWQtb3BlcmF0aW9uLWhvbWUnKS5jbGFzc0xpc3QucmVtb3ZlKCdjdXN0b20tZmxleCcpO1xyXG5cclxuICAgICAgICAgICAgbGV0IG5vZGUgPSBlLnRhcmdldC5wYXJlbnROb2RlLmNoaWxkcmVuO1xyXG4gICAgICAgICAgICBpZihub2RlLmxlbmd0aCA+IDEgKXtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgbGV0IG5vZGVMaW5rVGV4dCA9IG5vZGUuaXRlbSgwKS5pbm5lclRleHQ7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdHMtbGlzdC13cmFwcGVyX19oZWFkLW9wZXJhdGlvbi1hcnJvdycpLmNsYXNzTGlzdC5yZW1vdmUoJ2N1c3RvbS1oaWRlJyk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdHMtbGlzdC13cmFwcGVyX19ib2R5LWNvbnRhaW5lcicpLmNsYXNzTGlzdC5yZW1vdmUoJ2N1c3RvbS1mbGV4Jyk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdHMtbGlzdC13cmFwcGVyX19ib2R5LWNvbnRhaW5lcicpLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1oaWRlJyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgbW9kdWxlQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgICAgIG1vZHVsZUJveC5jbGFzc0xpc3QuYWRkKCdwcm9kdWN0LWxpc3RfbW9kdWxlbW94Jyk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdHMtbGlzdC13cmFwcGVyX19ib2R5JykuYXBwZW5kQ2hpbGQobW9kdWxlQm94KTtcclxuICAgICAgICAgICAgICAgIGxldCBsaXN0VG9BcHBlbmQgPSBlLnRhcmdldC5wYXJlbnROb2RlLmNoaWxkcmVuLml0ZW0oMSkuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgbW9kdWxlQm94LmFwcGVuZENoaWxkKGxpc3RUb0FwcGVuZCk7IFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3RzLWxpc3Qtd3JhcHBlcl9faGVhZC10aXRsZScpLmlubmVyVGV4dCA9IG5vZGVMaW5rVGV4dDtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3RzLWxpc3Qtd3JhcHBlcl9faGVhZC1vcGVyYXRpb24tYXJyb3cnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdjdXN0b20taGlkZScpO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0cy1saXN0LXdyYXBwZXJfX2hlYWQtb3BlcmF0aW9uLWhvbWUnKS5jbGFzc0xpc3QuYWRkKCdjdXN0b20tZmxleCcpXHJcbiAgICAgICAgbGV0IG1vZHVsZUJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0LWxpc3RfbW9kdWxlbW94Jyk7XHJcbiAgICAgICAgbGV0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdHMtbGlzdC13cmFwcGVyX19ib2R5Jyk7XHJcbiAgICAgICAgYm9keS5yZW1vdmVDaGlsZChtb2R1bGVCb3gpO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0cy1saXN0LXdyYXBwZXJfX2JvZHktY29udGFpbmVyJykuY2xhc3NMaXN0LmFkZCgnY3VzdG9tLWZsZXgnKTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdHMtbGlzdC13cmFwcGVyX19oZWFkLXRpdGxlJykuaW5uZXJUZXh0ID0gJ9Ca0LDRgtCw0LvQvtCzINC/0YDQvtC00YPQutGC0L7Qsic7XHJcbiAgICB9KVxyXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT0gRU5EIFBST0RVQ1QgTElTVCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxufSIsImpRdWVyeShmdW5jdGlvbiAoJCkge1xuXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLXBhY2thZ2UtYWRkLXRvLWNhcnRdJywgZnVuY3Rpb24oZSl7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdHlwZTogJ3Bvc3QnLFxuICAgICAgICAgICAgdXJsOiAkKHRoaXMpLmF0dHIoJ2hyZWYnKSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS50cmlnZ2VyKCd3Y19mcmFnbWVudF9yZWZyZXNoJyk7XG4gICAgICAgICAgICAgICAgJCgnW2RhdGEtY2FydC1tb2RhbF0nKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn0pOyJdfQ==
